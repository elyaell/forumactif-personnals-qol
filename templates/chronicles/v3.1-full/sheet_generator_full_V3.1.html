<!DOCTYPE html>
<html lang="en">
<head>
  <!-- GENERATEUR DE FICHE DEVELOPPE PAR ELYAELL (https://github.com/elyaell) -->
  <!-- VERSION 1.1 - 03/08/2025 -->
  <!-- Développé pour Chronicles (https://chronicles.forumeiros.com/) -->

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css">
	
	<style type="text/css">
	h1 {
	  text-align: center;
	  font-size: 40px;
	  font-family: "Bebas Neue", cursive;
	  margin: 0;
	}

	h3 {
	  text-align: center;
	  font-family: "Calibri";
	  text-transform: uppercase;
	  font-size: 18px;
	  margin: 0;
	}

	.form-top {
	  display: flex;
	  flex-direction: column;
	  flex-wrap: wrap;
	}

	.form-top .formulaire-bloc {
	  border: #bbbbbb solid 5px;
	  border-radius: 3px;
	  margin: auto;
	  width: 720px;
	  font-family: "Calibri";
	  margin-bottom: 10px;
	}

	.form-top .formulaire-bloc.active .form-sujet-content {
	  display: block !important;
	}

	.form-top .formulaire-bloc.active .title span::before {
	  content: ">";
	  margin-right: 10px;
	}

	.form-top .formulaire-bloc .form-sujet-content {
	  display: none;
	}

	.form-top .formulaire-bloc .title {
	  height: 40px;
	  text-align: right;
	  background: #3f4463;
	  color: #c3cce3;
	  font-family: "Bebas Neue", cursive;
	  font-size: 35px;
	  padding-right: 15px;
	}

	.textarea-description-little {
	  width: 95%;
	  height: 100px;
	}

	.textarea-description {
	  width: 95%;
	  height: 200px;
	}

	#genCode {
	  width: 720px;
	  height: 500px;
	}

	#area {
	  width: 720px;
	  background-color: #ffffff;
	  padding: 10px;
	}

	.form-sujet-content {
	  font-size: 12px;
	  color: #121212;
	  padding-right: 10px;
	  overflow: auto;
	  padding-left: 10px;
	  padding-right: 10px;
	  padding-top: 10px;
	  padding-bottom: 20px;
	  text-align: justify;
	  flex-wrap: wrap;
	  display: flex;
	  flex-direction: row;
	}

	label {
	  font-size: 15px;
	  margin-left: 20px;
	  margin-top: 10px;
	  width: 160px;
	  float: left;
	}

	div#formulaire-joueur label {
	  width: 300px;
	}

	input,
	select {
	  width: 300px;
	  border: #bbbbbb solid 3px;
	  -moz-border-radius: 5px;
	  border-radius: 5px;
	  height: 30px;
	  margin-top: 5px;
	}

	input {
	  cursor: pointer;
	}

	div#formulaire-histoire label {
	  width: unset !important;
	  float: unset !important;
	}

	div#formulaire-histoire input[type="checkbox"] {
	  width: 20px;
	}

	.all_parts {
	  display: flex;
	  flex-direction: row;
	  align-items: normal;
	}

	textarea {
	  border: #bbbbbb solid 3px;
	  -moz-border-radius: 5px;
	  border-radius: 5px;
	  resize: none;
	  height: 200px;
	}

	#form-group,
	#form-faction {
	  display: flex;
	  flex-direction: row;

	  #info-citizen,
	  #info-engineers,
	  #info-mre,
	  #info-citizens,
	  #info-sociis,
	  #info-officials {
		display: none;
		font-size: 13px;
	  }
	}

	#add-link {
	  width: 150px !important;
	  margin-left: 10px;
	}

	#champ_politique,
	#champ_sous_groupe {
	  width: 270px !important;
	}

	</style>


</head>

<body>

  <div class="form-top">

    <h1></h1>

    <div id="formulaire-identity" class="formulaire-bloc">
      <!-- PREMIERE PARTIE -->
      <div class="title"><span>état civil du personnage</span></div>

      <div class="form-sujet-content">

        <!-- INFO ETAT CIVIL -->
        <div><label id="label_image_perso" for="image_perso">Image (200*200) </label><input type="text" value=""
            id="image_perso" name="image_perso" /></div>
        <div><label id="label_nom" for="champ_nom">Nom </label><input type="text" value="" id="champ_nom"
            name="champ_nom" /></div>
        <div><label id="label_prenom" for="champ_prenom">Prénom(s) </label><input type="text" value="" id="champ_prenom"
            name="champ_prenom" /></div>
        <div><label id="label_age" for="champ_age">Date de naissance / Âge </label><input type="text" value=""
            id="champ_age" name="champ_age" /></div>
        <div><label id="label_genre" for="champ_genre">Genre </label><input type="text" value="" id="champ_genre"
            name="champ_genre" /></div>
        <div><label id="label_origines" for="champ_origines">Nationalité / Origines </label><input type="text" value=""
            id="champ_origines" name="champ_origines" /></div>
        <div><label id="label_statut" for="champ_statut">Statut civil </label><input type="text" value=""
            id="champ_statut" name="champ_statut" /></div>
        <div><label id="label_job" for="champ_job">Emploi </label><input type="text" value="" id="champ_job"
            name="champ_job" /></div>
        <div><input type="checkbox" id="champ_alteration" name="champ_alteration" checked="" /><label
            id="label_alteration" for="champ_alteration">A un pouvoir</label></div>
        <!-- FIN INFO ETAT CIVIL -->


        <!-- INFO FACTION -->
        <div>
          <label id="label_politique" for="champ_politique">Inclinaison politique</label>
          <form name="list-groupe" id="form-faction">
            <select name="champ_politique" id="champ_politique">
              <option value="searsmont">Voie des Etoiles</option>
              <option value="citizens">Neutre</option>
              <option value="mre">Mouvement pour la régulation des altérés</option>
              <option value="sociis">Sociis</option>
              <option value="officials">Services Publics</option>
            </select>
          </form>
          <div id="faction-description">
            <span id="info-searsmont">La <span style="color: #409cbd; font-weight: bold">Voie des Etoiles </span> est à
              mi-chemin entre mouvement mystique et religion new-age, basant leurs croyances sur la théorie des flux
              étoilés et la supériorité des altérés. (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1380-factions-x-politiquement-et-humainement-engage">en savoir
                plus...</a>)</span>
            <span id="info-sociis"><span style="color: #169c60; font-weight: bold">Sociis</span> était jusqu'à présent
              considérée plus comme un regroupement d'associations de quartier ; le genre d'affiliation par des rêveurs
              pour des rêveurs, dont le but est de trouver un moyen de cohabitation entre altérés et non-altérés,
              refusant l'idée qu'un schisme soit inévitable. Depuis peu, ils grimpent sur la scène politique, entrainés
              par leur leader, Silken Anderson (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1380-factions-x-politiquement-et-humainement-engage">en savoir
                plus...</a>)</span>
            <span id="info-mre">Le<span style="color : #991919; font-weight: bold"> mouvement pour la régulation des
                altérés</span> est un mouvement politique radical, militant pour un contrôle plus strict des altérés,
              voire extrémiste selon certains. S'il serait facile de les classifier comme radicaux, ils ont néanmoins
              des arguments raisonnables concernant le contrôle des altérés, appuyés par chaque nouvel incident
              impliquant un individu perdant le contrôle ou subissant le contrecoup de son pouvoir.... (<a
                target="_blank"
                href="https://chronicles.forumeiros.com/t1380-factions-x-politiquement-et-humainement-engage">en savoir
                plus...</a>)</span>
            <span id="info-officials">Les <span style="color : #4A1DA3; font-weight: bold">services publics</span> se
              réfèrent non seulement aux dirigeants eux-même, mais également aux personnes travaillant dans la police ou
              toute autre infrastructure directement gérée par le gouvernement. Ils n'ont clairement pas un travail
              aisé, tiraillé entre les demandes du publics et des établissements privés... (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1380-factions-x-politiquement-et-humainement-engage">en savoir
                plus...</a>) </span>
            <span id="info-citizens">Les citoyens <span style="color : #F09839; font-weight: bold">neutres</span> sont
              tout simplement les citoyens qui ne s'impliquent pas spécialement avec un groupe ou un autre, bien trop
              occupé à vivre leur vie pour se préoccuper de politique... (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1380-factions-x-politiquement-et-humainement-engage">en savoir
                plus...</a>) </span>
          </div>
        </div>
        <!-- FIN INFO FACTION -->


        <!-- INFO GROUPE -->
        <div>
          <label id="label_sous-groupe" for="champ_sous_groupe">Sous-Groupe</label>
          <form name="list-groupe" id="form-group">
            <select name="champ_sous_groupe" id="champ_sous_groupe">
              <option value="eraser">Régulateurs</option>
              <option value="citizen">Citoyen</option>
              <option value="engineers">Ingénieurs</option>
            </select>
          </form>
          <div id="groupe-description">
            <span id="info-eraser">Les <span style="color: #991919; font-weight: bold">régulateurs</span> sont
              théoriquement la force spécialisée de la ville dans la gestion de crime ou d'accident impliquant les
              altérés. En réalité, ils tendent de plus en plus à marcher sur les plates-bandes de la police locale, qui
              vit assez mal cette intrusion dans ses prérogatives. (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1381-groupes-x-nature-ou-culture">en savoir plus...)</a></span>
            <span id="info-citizen">Les <span style="color : #169c60; font-weight: bold">citoyens </span>sont les
              individus n'ayant ni pouvoir, ni job particulier... (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1381-groupes-x-nature-ou-culture">en savoir plus...</a>)
            </span>
            <span id="info-engineers">Les <span style="color : #F09839; font-weight: bold">ingénieurs</span> sont les
              personnes qui travaillent avec les altérés ou la technologie, quelque soit leur spécialité. Ils ont un
              statut un peu à part à Madison, pouvant se permettre des écarts qui sont plus ou moins "admis" au nom de
              l'avancement de la recherche. (<a target="_blank"
                href="https://chronicles.forumeiros.com/t1381-groupes-x-nature-ou-culture">en savoir plus...</a>)
            </span>
          </div>
        </div>
        <!-- FIN INFO GROUPE -->

      </div>
      <!-- FIN PREMIERE PARTIE -->
    </div>

    <div id="formulaire-joueur" class="formulaire-bloc">
      <!-- SECONDE PARTIE : JOUEUR -->
      <div class="title"><span>Derrière l'écran</span></div>
      <div class="form-sujet-content textarea-pouvoir">
        <label id="label_question_joueur_1" for="champ_question_joueur_1">Parle nous un peu de toi (si tu as envie
          !)</label> <textarea class="textarea-description-little" id="champ_question_joueur_1"
          name="champ_question_joueur_1"></textarea>
        <label id="label_question_joueur_2" for="champ_question_joueur_2">Comment nous as-tu trouvé ?</label> <textarea
          class="textarea-description-little" id="champ_question_joueur_2" name="champ_question_joueur_2"></textarea>
        <label id="label_question_joueur_3" for="champ_question_joueur_3">Autre chose ?</label> <textarea
          class="textarea-description-little" id="champ_question_joueur_3" name="champ_question_joueur_3"></textarea>
      </div>
      <!-- FIN SECONDE PARTIE : JOUEUR -->
    </div>

    <div id="formulaire-pouvoir-bloc" class="formulaire-bloc">
      <!-- TROISIEME PARTIE (OPTIONNELLE) : POUVOIR -->
      <div id="formulaire-pouvoir" style="">
        <div class="title"><span>Pouvoir</span></div>
        <div class="form-sujet-content textarea-pouvoir">
          <div><label id="label_nom_pouvoir" for="champ_nom_pouvoir">Nom du pouvoir</label> <input type="text" value=""
              id="champ_nom_pouvoir" name="champ_nom_pouvoir" /></div>
          <label id="label_effet_pouvoir" for="champ_effet_pouvoir">Effets du pouvoir</label>
          <textarea class="textarea-description-little" id="champ_effet_pouvoir"
            name="champ_effet_pouvoir">Description des pouvoirs de votre personnage, ce qu'il est capable de faire (ou non)</textarea>
          <label id="label_effets_secondaire" for="champ_effets_secondaire">Effets secondaires</label>
          <textarea class="textarea-description-little" id="champ_effets_secondaire"
            name="champ_effets_secondaire">Description des contrecoups du pouvoir.</textarea>
        </div>
      </div>
      <!-- FIN TROISIEME PARTIE (OPTIONNELLE) : POUVOIR -->
    </div>

    <div id="formulaire-histoire" class="formulaire-bloc">
      <!-- QUATRIEME PARTIE : HISTOIRE -->
      <div id="formulaire-histoire">
        <div class="title" id="title-formulaire-histoire"><span>Histoire</span></div>
        <div class="form-sujet-content">

          <!-- TROIS PARTIES OU UNE SEULE POUR HISTOIRE / PHYSIQUE / MENTAL -->
          <div class="all_parts">
            <input type="checkbox" id="champ_descriptions" name="champ_descriptions" /><label id="label_descriptions"
              for="champ_descriptions">Pas besoin de descriptions séparées, je fais tout dans l'histoire !</label>
          </div>

          <textarea class="textarea-description" id="champ_histoire" name="champ_histoire"></textarea>
        </div>
      </div>
      <!-- FIN QUATRIEME PARTIE : HISTOIRE -->
    </div>

    <div id="formulaire-physique" class="formulaire-bloc">
      <!-- CINQUIEME PARTIE : PHYSIQUE -->
      <div class="title"><span>Physique</span></div>
      <div class="form-sujet-content">
        <textarea class="textarea-description" id="champ_physique"
          name="champ_physique">Il n'y a pas de règles particulières : tu peux juste lister ses caractéristiques physiques (du type corpulence, carnation, etc) ou décrire le personnage dans un bloc. Si tu veux donner un titre à tes éléments pour plus de clarté, tu peux utiliser les balises suivantes : <span class="val_groupe">Ton titre ici •</span>.</textarea>
        <div><label id="label15" for="champ_personnage">Personnage utilisé </label> <input type="text" value=""
            id="champ_personnage" name="champ_personnage" /></div>
      </div>
      <!-- FIN CINQUIEME PARTIE : PHYSIQUE -->
    </div>

    <div id="formulaire-mental" class="formulaire-bloc">
      <!-- SIXIEME PARTIE : MENTAL -->
      <div class="title"><span>Mental</span></div>
      <div class="form-sujet-content">
        <textarea class="textarea-description" id="champ_mental"
          name="champ_mental">Comme pour le physique, il n'y a pas de règles particulières : il est possible de lister les traits de caractères, les qualités, le défaut ou tout simplement de le décrire dans un bloc. Si tu veux donner un titre à tes éléments pour plus de clarté, tu peux utiliser les balises suivantes : <span class="val_groupe">Ton titre ici •</span></textarea>
      </div>
      <!-- FIN SIXIEME PARTIE : MENTAL -->
    </div>

    <div id="formulaire-liens" class="formulaire-bloc">
      <!-- SEPTIEME PARTIE (OPTIONNELLE) : LIENS -->
      <div class="title" id="title-formulaire-liens"><span>Liens</span></div>
      <div class="form-sujet-content">
        <!-- BOUTON AJOUTER UN LIEN -->
        <input type="button" value="Ajouter un lien" id="add-link" />
        <div id="form-sujet-links">
        </div>
      </div>
      <!-- FIN SEPTIEME PARTIE (OPTIONNELLE) : LIENS -->
    </div>


    <p>
      <!-- BOUTON DE GENERATION DE LA FICHE -->
      <input type="button" value="Générer le code la fiche" id="genererFiche" />

      <!-- POSTER LA LA FICHE -->
      <input type="button" value="Poster la fiche" id="submitSheet" />
    </p>

    <div id="area">
      <!-- CONTIENDRA LE CODE GENERER DE LA FICHE -->
    </div>
    <h3>Version 1.1</h3>
  </div>


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript">
  $(function () {
  // OUVERTURE / FERMETURE BLOCS
  $(".title").on("click", function () {
    var bloc = $(this).closest(".formulaire-bloc");
    if ($(bloc).hasClass("active")) {
      $(bloc).removeClass("active");
    } else {
      $(bloc).addClass("active");
    }
  });

  // RECUPERATION DU TYPE DE FICHE
  var typeFiche = window.location.search.replace("?", "").split("&");
  if (typeFiche[0].split("=")[1] == "PREDEFINI") {
    // FICHE PREDEFINI
    $("#champ_descriptions").remove();
    $("#formulaire-joueur").remove();
    $("#title-formulaire-histoire").textContent("Points d'histoire");
    typeFiche = typeFiche[0].split("=")[1];
  } else if (typeFiche[0].split("=")[1] == "PNJ") {
    // FICHE PNJ
    $("#champ_descriptions").remove();
    $("#formulaire-joueur").remove();
    $("#title-formulaire-histoire").textContent("Détails du personnage");
    $("#formulaire").remove();
    typeFiche = typeFiche[0].split("=")[1];
  } else {
    // FICHE JOUEUR
    $("#formulaire-liens").remove();
    typeFiche = "PERSONNAGE";
  }

  $("h1").text(`GENERATEUR DE FICHE ${typeFiche}`);

  // SWITCH INFORMATIONS FACTIONS
  var valGroup = $("#champ_politique").find(":selected").val();
  $("#faction-description>span").css("display", "none");
  $(`#info-${valGroup}`).css("display", "block");

  $("#champ_politique").on("change", function () {
    valGroup = $(this).find(":selected").val();
    $("#faction-description>span").css("display", "none");
    $(`#info-${valGroup}`).css("display", "block");
  });

  // SWITCH INFORMATIONS GROUPES
  var value = $("#champ_sous_groupe").find(":selected").val();
  $("#groupe-description>span").css("display", "none");
  $(`#info-${value}`).css("display", "block");

  $("#champ_sous_groupe").on("change", function () {
    var value = $(this).find(":selected").val();
    $("#groupe-description>span").css("display", "none");
    $(`#info-${value}`).css("display", "block");
  });

  // AFFICHAGE INFORMATIONS POUVOIR
  $("#champ_alteration").on("change", function () {
    if ($(this).is(":checked")) {
      $("#formulaire-pouvoir-bloc").css("display", "block");
    } else {
      $("#formulaire-pouvoir-bloc").css("display", "none");
    }
  });

  // AJOUT NOUVEAU LIEN
  var lengthLinks = 0;
  $("#add-link").on("click", function () {
    lengthLinks = lengthLinks + 1;
    $("#formSujetLink").append(
      `<div class="current-link"><div id="block-link-${lengthLinks}"><div class="firstline"><label id="label-link-${lengthLinks}" for="link-${lengthLinks}">Personnage</label><input type="text" value="" id="link-${lengthLinks}" name="link-${lengthLinks}" /><br/><label id="label-img-link-${lengthLinks}" for="link-${lengthLinks}">Image du personnage</label><input type="text" value="" id="img-link-${lengthLinks}" name="img-link-${lengthLinks}" /><input type="button" value="x" id="delete-link-${lengthLinks}" class="remove-link" /></div><br/><textarea id="desc-link-${lengthLinks}" class="textarea-description-little" name="${lengthLinks}"></textarea></div></div>`
    );

    // AJOUT FONCTIONNALITE SUPPRESSION LIEN
    $(`#delete-link-${lengthLinks}`).on("click", function (event) {
      $(this).closest(".current-link").remove();
    });
  });

  // UN SEUL BLOC POUR HISTOIRE / PHYSIQUE / MENTAL
  $("#champ_descriptions").on("change", function () {
    if ($(this).is(":checked")) {
      $("#formulaire-mental").css("display", "none");
      $("#formulaire-physique").css("display", "none");
    } else {
      $("#formulaire-mental").css("display", "block");
      $("#formulaire-physique").css("display", "block");
    }
  });

  // GENERATION FICHE
  $("#genererFiche").on("click", function () {
    // IDENTITE
    var { identity, pouvoir, descriptions, histoire, player, links } =
      generationHTML(typeFiche, valGroup, lengthLinks);

    /**
     * -- GENERATION DU CODE HTML FINAL
     */
    if (typeFiche == "PERSONNAGE") {
      $("#area").html(
        `<textarea name="genCode" id="genCode"><div class="box-predef-container">${identity}${pouvoir}${descriptions}${histoire}${player}</div></textarea>`
      );
    } else {
      $("#area").html(
        `<textarea name="genCode" id="genCode"><div class="box-predef-container">${identity}${pouvoir}${descriptions}${histoire}${links}</div></textarea>`
      );
    }
  });

  /**
   * -- REDIRECTION VERS CREATION DE SUJET
   *
   */
  $("#submitSheet").on("click", function () {
    var { identity, pouvoir, descriptions, histoire, player, links } =
      generationHTML(typeFiche, valGroup, lengthLinks);

    var message = `<div class="box-predef-container">${identity}${pouvoir}${descriptions}${histoire}${player}${links}</div>`;
    var subject = `${$("#champ_prenom").val()} ${$("#champ_nom").val()}`;

    localStorage.setItem(
      "sheet",
      JSON.stringify({ subject: subject, message: message })
    );

    // Rediriger vers la nouvelle page
    window.location.assign("/post?f=13&mode=newtopic");
  });

  function generationHTML(typeFiche, valGroup, lengthLinks) {
    var identity;
    if (typeFiche == "PNJ") {
      identity = `<div class="sujets-box-infos-predef"><div class="sujets-title-predef ${valGroup}">${$(
        "#champ_prenom"
      ).val()} ${$(
        "#champ_nom"
      ).val()}.</div><div class="sujets-content"><div class="box-predef"><div class="box-1-predef"><img src="${$(
        "#image_perso"
      ).val()}"/></div><div class="box-2-predef"><span class= ${valGroup}">Age ×</span>  ${$(
        "#champ_age"
      ).val()}<br/><span class= ${valGroup}">Genre ×</span> ${$(
        "#champ_genre"
      ).val()}<br\><span class= ${valGroup}">Nationalité / Origines ×</span> ${$(
        "#champ_origines"
      ).val()}<br/><span class= ${valGroup}">Statut civil ×</span> ${$(
        "#champ_statut"
      ).val()}<br\><span class= ${valGroup}">Emploi ×</span> ${$(
        "#champ_job"
      ).val()}<br\><span class= ${valGroup}">Inclinaison politique ×</span> ${$(
        "#champ_politique"
      )
        .find(":selected")
        .text()}<br\><span class= ${valGroup}">Sous-groupe ×</span> ${$(
        "#champ_sous_groupe"
      )
        .find(":selected")
        .text()}</div></div></div></div>`;
    } else {
      identity = `<div class="sujets-box-infos-predef"><div class="sujets-title-predef ${valGroup}">${$(
        "#champ_prenom"
      ).val()} ${$(
        "#champ_nom"
      ).val()}.</div><div class="sujets-content"><div class="box-predef"><div class="box-1-predef"><img src="${$(
        "#image_perso"
      ).val()}"/></div><div class="box-2-predef"><span class="${valGroup}">Nom ×</span> ${$(
        "#champ_nom"
      ).val()}<br\><span class="${valGroup}">Prénom ×</span> ${$(
        "#champ_prenom"
      ).val()}<br/><span class="${valGroup}">Age ×</span> ${$(
        "#champ_age"
      ).val()}<br/><span class="${valGroup}">Genre ×</span> ${$(
        "#champ_genre"
      ).val()}<br\><span class="${valGroup}">Nationalité / Origines ×</span> ${$(
        "#champ_origines"
      ).val()}<br/><span class="${valGroup}">Statut civil ×</span> ${$(
        "#champ_statut"
      ).val()}<br\><span class="${valGroup}">Emploi ×</span> ${$(
        "#champ_job"
      ).val()}<br\><span class="${valGroup}">Inclinaison politique ×</span> ${$(
        "#champ_politique"
      )
        .find(":selected")
        .text()}<br\><span class="${valGroup}">Sous-groupe ×</span> ${$(
        "#champ_sous_groupe"
      )
        .find(":selected")
        .text()}<br\><span class="${valGroup}">Feat ×</span> ${$(
        "#champ_personnage"
      ).val()}</div></div></div></div>`;
    }

    // POUVOIR
    var pouvoir = "";
    if ($("#champ_alteration").is(":checked")) {
      pouvoir = `<div class="sujets-box-predef-lng"><div class="sujets-title-predef-part">pouvoir.</div><div class="sujets-content"><span class="${valGroup}">${$(
        "#champ_nom_pouvoir"
      ).val()} ×</span> ${$(
        "#champ_effet_pouvoir"
      ).val()}<br/><span class="${valGroup}">Effets secondaires ×</span> ${$(
        "#champ_effets_secondaire"
      ).val()}</div></div>`;
    }

    // PHYSIQUE ET MENTAL
    var descriptions;
    if (
      (typeFiche == "PERSONNAGE" &&
        $("#champ_descriptions").is(":not(:checked)")) ||
      typeFiche == "PREDEFINI"
    ) {
      descriptions = `<div class="sujets-box-predef-column"><div class="sujets-box-predef"><div class="sujets-title-predef-part">physique.</div><div class="sujets-content"> ${$(
        "#champ_physique"
      ).val()}</div></div><div class="sujets-box-predef"><div class="sujets-title-predef-part">mental.</div><div class="sujets-content"> ${$(
        "#champ_mental"
      ).val()}</div></div></div>`;
      descriptions = descriptions.replaceAll(
        "val_groupe",
        $("#champ_politique").find(":selected").val()
      );
    }

    // DERNIERS BLOCS
    var histoire, player, links;
    if (typeFiche == "PERSONNAGE") {
      histoire = `<div class="sujets-box-predef-lng"><div class="sujets-title-predef-part">histoire.</div><div class="sujets-content">${$(
        "#champ_histoire"
      ).val()}</div></div>`;
      player = `<div class="sujets-box-predef-lng"><div class="sujets-title-predef-part">derrière l\'écran.</div><div class="sujets-content"><span class="${valGroup}">Parle nous un peu de toi (si tu as envie !) ×</span> ${$(
        "#champ_question_joueur_1"
      ).val()}<br/><span class="${valGroup}">Comment nous as-tu trouvé ×</span> ${$(
        "#champ_question_joueur_2"
      ).val()}<br/><span class="${valGroup}">Autre chose ? ×</span>${$(
        "#champ_question_joueur_3"
      ).val()}</div></div>`;
    } else {
      histoire = `<div class="sujets-box-predef-column"><div class="sujets-box-predef"><div class="sujets-title-predef-part">points d\'histoire.</div><div class="sujets-content">${$(
        "#champ_histoire"
      ).val()}</div></div>`;
      links = `<div class="sujets-box-predef"><div class="sujets-title-predef-part">liens.</div><div class="sujets-content">`;

      for (var i = 1; i <= lengthLinks; i++) {
        if ($("#link-" + i) != null) {
          links += `<div><div class="links-predef"><img alt="" src="${$(
            "#img-link-" + i
          ).val()}" style="width : 60px ; border-radius : 100px ;"/></div><div class="inks-text-predef"><div class="GLOBTexte"><span class="CORPSTextT">${$(
            "#link-" + i
          ).val()} × <span>${$(
            "#desc-link-" + i
          ).val()}</span></span></div></div>`;
        }
      }
      links += `</div></div></div>`;
    }
    return { identity, pouvoir, descriptions, histoire, player, links };
  }
});
</script>
</body>

</html>